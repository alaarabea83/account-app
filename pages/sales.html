<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="../icons/logo.png" />
    <link rel="stylesheet" href="../css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&family=Tajawal:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <title>ุณูู ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช</title>
    <style>
      body {
        font-family: "Tajawal", sans-serif;
        background: #0e1a14;
        margin: 0;
      }

      h1,
      h2,
      h3 {
        font-family: "Cairo", sans-serif;
        font-weight: 700;
        margin: 5px;
      }

      h3 {
        color: #10b981;
      }

      /* ===== Layout ===== */
      section {
        max-width: 1000px;
        margin: 60px auto 20px;
        margin-bottom: 80px;
        background: #1f2937;
        display: flex;
        flex-direction: column;
        gap: 25px;
        padding: 15px;
      }

      .t-container {
        background: #1f2937;
        color: #ecf0f1;
        border-radius: 12px;
        padding: 5px;
        border: 1px solid #10b98155;
      }

      .card {
        background: #1f2937;
        /* ุฑูุงุฏู ุฏุงูู ุฃููู */
        margin: 10px;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid #10b98155;
        box-shadow:
          0 10px 25px rgba(0, 0, 0, 0.35),
          0 4px 10px rgba(0, 0, 0, 0.25);
      }

      .table-container {
        max-height: 220px;
        overflow: auto;
        border-radius: 10px;
        box-shadow:
          0 10px 25px rgba(0, 0, 0, 0.35),
          0 4px 10px rgba(0, 0, 0, 0.25);
      }

      /* ===== Form ===== */
      .form-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 10px;
      }

      .form-row input,
      .form-row select {
        flex: 1;
        background: #374151;
        color: #ecf0f1;
        border: 1px solid #4b5563;
        border-radius: 8px;
        padding: 10px;
        font-size: 14px;
        box-sizing: border-box;
        transition: 0.2s;
      }

      .form-row button {
        background: #f1c40f;
        color: #000;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.2s;
        font-size: 15px;
        font-weight: bold;
      }

      .form-row button:hover {
        opacity: 0.9;
      }

      /* ===== Table ===== */
      table {
        width: 100%;
        border-collapse: collapse;
        background: #1f2937;
      }

      thead th {
        background: #14532d;
        color: #fff;
        padding: 12px;
        font-size: 14px;
        border-top: 1px;
        border-bottom: 1px;
      }

      tbody td {
        padding: 10px;
        border-bottom: 1px solid #eee;
        font-size: 14px;
        text-align: center;
      }

      tbody tr:hover {
        background: #1f3a5f;
        /* ุฃุฎุถุฑ ุฃูุชุญ */
        color: #fff;
      }

      /* ===== Scrollable Table ===== */
      .table-scroll {
        width: 100%;
        overflow: auto;
      }

      .table-scroll table {
        min-width: 600px;
      }

      .table-scroll thead {
        position: sticky;
        top: 0;
        z-index: 1;
      }

      .table-scroll::-webkit-scrollbar {
        height: 6px;
      }

      .table-scroll::-webkit-scrollbar-thumb {
        background: #e74c3c;
        border-radius: 10px;
      }

      /* ===== Buttons ===== */

      .action-buttons {
        display: flex;
        gap: 6px;
        justify-content: center;
      }

      .btn-edit {
        background: #f1c40f;
        color: #000;
        border: none;
        padding: 5px 10px;
        border-radius: 6px;
        cursor: pointer;
      }

      .btn-delete {
        background: #e74c3c;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 6px;
        cursor: pointer;
      }

      .btn-edit:hover,
      .btn-delete:hover {
        opacity: 0.85;
      }

      /* ุฃุฒุฑุงุฑ ุฏุงุฎู ุงูุฌุฏูู */
      td > .btn-delete,
      td > .btn-edit {
        margin: 0 3px;
        min-width: 40px;
      }

      /* ===== Modal ===== */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .modal-box {
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        width: 90%;
        max-width: 400px;
        text-align: center;
        margin: 25px;
      }

      .modal-box button {
        margin-top: 15px;
        padding: 10px 25px;
        border: none;
        background: #2e86c1;
        color: #fff;
        border-radius: 8px;
        cursor: pointer;
      }

      /* ===== Invoice Inputs ===== */
      .itemQty,
      .itemPrice,
      .itemTotal {
        width: 75px;
        padding: 6px 8px;
        border-radius: 8px;
        border: 1px solid #4b5563;
        background: #111827;
        color: #f9fafb;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
        transition: 0.2s;
      }

      /* ุนูุฏ ุงูุชุฑููุฒ */
      .itemQty:focus,
      .itemPrice:focus,
      .itemTotal:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
      }

      .itemTotal {
        font-weight: bold;
        color: #f1c40f;
      }

      #invoiceTable tbody tr:hover {
        background-color: transparent;
        color: inherit;
      }

      .btn-delete-item {
        background-color: #14532d;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 25px;
        line-height: 1;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        transition: 0.2s;
      }

      .btn-delete-item:hover {
        opacity: 0.85;
      }

      @media (max-width: 600px) {
        .btn-delete-item {
          font-size: 20px;
          width: 36px;
          height: 36px;
        }
      }

      @media (max-width: 600px) {
        label {
          display: block;
          text-align: right;
          width: 100%;
        }

        td > .btn-delete,
        td > .btn-edit {
          flex: 1 1 auto;
          margin-bottom: 5px;
        }

        #invoiceItems .form-row {
          justify-content: center;
          align-items: center;
          gap: 8px;
        }

        #invoiceItems .form-row select,
        #invoiceItems .form-row input {
          max-width: 50%;
        }
      }

      /* ===== ุฒุฑ ุงูุญูุธ ===== */
      #saveInvoiceBtn {
        width: 100%;
        max-width: 150px;
        padding: 10px 20px;
        border-radius: 12px;
        border: none;
        background: #f1c40f;
        color: black;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
      }

      .card .form-row {
        display: flex;
        align-items: center;
        gap: 10px; /* ูุณุงูุฉ ุจูู ุงููุงุจู ูุงูุญูู */
      }

      .card .form-row label {
        width: 120px; /* ุญุฌู ุซุงุจุช ููุงุจู */
        text-align: left; /* ุงููุงุจู ุนูู ุงูุดูุงู */
        font-weight: bold;
        margin: 0;
      }

      .card .form-row input[type="number"] {
        flex: 1; /* ุงูุญูู ูุงุฎุฏ ุจุงูู ุงููุณุงุญุฉ */
        max-width: 100px; /* ุฃูุตู ุนุฑุถ ููุญููู */
        padding: 5px 8px;
        border-radius: 6px;
        border: 1px solid #2c3e50;
        background: #374151;
        text-align: center;
        font-size: 14px;
      }

      /* ูู ุชุญุจ ุชุจูู responsive ุฃูุชุฑ ุนูู ุงูููุจุงูู */
      @media (max-width: 600) {
        .card .form-row {
          justify-content: flex-start;
        }

        .card .form-row label {
          width: 100px;
        }

        .card .form-row input[type="number"] {
          max-width: 120px;
        }
      }

      /* ูููุชุตูุญ ุงูุญุฏูุซ */
      #customerBalance::placeholder {
        color: #ffffff; /* ุฃุจูุถ */
        opacity: 1; /* ููุชุฃูุฏ ุฅู ุงูููู ุธุงูุฑ */
      }

      /* ููุชุตูุญ ูุงูุฑูููุณ ุงููุฏูู */
      #customerBalance::-moz-placeholder {
        color: #ffffff;
        opacity: 1;
      }

      /* ููุชุตูุญ ุฅูุชุฑูุช ุฅูุณุจููุฑุฑ */
      #customerBalance:-ms-input-placeholder {
        color: #ffffff;
      }

      /* ููุชุตูุญ ูุฑูู ูุณูุงุฑู ูุฃูุจุฑุง */
      #customerBalance::-webkit-input-placeholder {
        color: #ffffff;
      }
    </style>
  </head>

  <body>
    <nav class="breadcrumbs">
      <a href="../index.html" class="home">ุงูุฑุฆูุณูุฉ</a>
      <a href="../pages/customers.html" class="home">ุงูุญุณุงุจุงุช</a>
      <a href="../pages/products.html" class="home">ุงูููุชุฌุงุช</a>
      <span class="current">ุงููุจูุนุงุช</span>
      <a href="../pages/purchases.html" class="home"> ุงููุดุชุฑูุงุช</a>
      <a href="../pages/income.html" class="home">ุงูููุจูุถุงุช</a>
      <a href="../pages/expenses.html" class="home">ุงููุฏููุนุงุช</a>
      <a href="../pages/cash.html" class="home">ุงูุฎุฒููุฉ</a>
      <a href="about.html" class="home">ูุนูููุงุช</a>
    </nav>

    <section>
      <div class="t-container">
        <h3>๐งพ ูุงุชูุฑุฉ ุจูุน ุฌุฏูุฏุฉ</h3>

        <!-- ุงุฎุชูุงุฑ ุงูุนููู + ุฑุตูุฏ -->
        <div class="card">
          <div class="form-row">
            <select id="invoiceCustomer"></select>
            <input
              type="number"
              id="customerBalance"
              placeholder="ุงูุฑุตูุฏ ุงูุณุงุจู"
              readonly
            />
          </div>

          <!-- Dropdown ูุฅุถุงูุฉ ุงูููุชุฌุงุช -->
          <div class="form-row">
            <select id="invoiceProductSelect">
              <option value="" disabled selected>ุฅุถุงูุฉ ููุชุฌุงุช</option>
            </select>
          </div>
        </div>

        <!-- ุฌุฏูู ุงูููุชุฌุงุช -->
        <div class="card table-container">
          <div class="table-scroll">
            <table id="invoiceTable">
              <thead>
                <tr>
                  <th>#</th>
                  <th>ุงูููุชุฌ</th>
                  <th>ุงููููุฉ</th>
                  <th>ุณุนุฑ ุงูุจูุน</th>
                  <th>ุงูุฅุฌูุงูู</th>
                  <th>ุญุฐู</th>
                </tr>
              </thead>
              <tbody id="invoiceItems"></tbody>
            </table>
          </div>
        </div>

        <!-- ุฅุฌูุงูู ุงููุงุชูุฑุฉ + ุงูุฅุฌูุงูู ุงูููู -->
        <div class="card">
          <div class="form-row">
            <label>ุฅุฌูุงูู ุงููุงุชูุฑุฉ:</label>
            <input type="number" id="invoiceTotal" value="0" readonly />
            <label>ุงูุฅุฌูุงูู ุงูููู:</label>
            <input type="number" id="grandTotal" value="0" readonly />
          </div>

          <!-- ุงููุฏููุน + ุงููุชุจูู -->
          <div class="form-row">
            <label>ุงููุจูุบ ุงููุฏููุน:</label>
            <input type="number" id="paidAmount" />
            <label>ุงูุฑุตูุฏ ุงูุฌุฏูุฏ:</label>
            <input type="number" id="remainingAmount" value="0" readonly />
          </div>
        </div>

        <!-- ุฒุฑ ุญูุธ ุงููุงุชูุฑุฉ -->
        <div class="form-row">
          <button id="saveInvoiceBtn">๐พ ุญูุธ ุงููุงุชูุฑุฉ</button>
        </div>
      </div>

      <div class="t-container">
        <h3 style="text-align: right">๐ ุงูููุงุชูุฑ ุงูุณุงุจูุฉ</h3>
        <div class="form-row" style="gap: 10px; align-items: end">
          <div>
            <label>ูู ุชุงุฑูุฎ</label>
            <input type="date" id="fromDate" />
          </div>

          <div>
            <label>ุฅูู ุชุงุฑูุฎ</label>
            <input type="date" id="toDate" />
          </div>

          <button
            style="padding: 8px 16px; font-size: 14px; border-radius: 8px"
            onclick="filterSalesByDate()"
          >
            ๐ ุจุญุซ
          </button>
          <button
            style="padding: 8px 16px; font-size: 14px; border-radius: 8px"
            type="button"
            onclick="resetSalesFilter()"
          >
            ๐ ุนุฑุถ ุงููู
          </button>
        </div>

        <div class="table-scroll">
          <table id="salesTable">
            <thead>
              <tr>
                <th>#</th>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุงูุนููู</th>
                <th>ุงูุฅุฌูุงูู</th>
                <th>ุงููุฏููุน</th>
                <th>ุงููุชุจูู</th>
                <th>ุงูุณุงุจู</th>
                <th>ุงูุญุงูู</th>
                <th>ุงููุฒูุฏ</th>
              </tr>
            </thead>

            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ======== ููุฏุงู ุนุตุฑู ุนุงู ูุญุฐู ===== -->
    <div id="appModal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <div
          class="modal-icon"
          style="font-size: 48px; color: #e74c3c; margin-bottom: 10px"
        >
          โ๏ธ
        </div>
        <h3 id="modalTitle">ุชูุจูู</h3>
        <p id="modalMessage">ุงูุฑุณุงูุฉ ููุง</p>
        <div
          class="modal-actions"
          style="display: flex; gap: 8px; justify-content: center"
        >
          <!-- ุฃุฒุฑุงุฑ ุชุฃููุฏ ุงูุญุฐู -->
          <button
            id="modalCancelBtn"
            style="
              padding: 6px 10px;
              font-size: 12px;
              border-radius: 6px;
              border: none;
              background: #ecf0f1;
              color: #333;
              cursor: pointer;
            "
          >
            ุฅูุบุงุก
          </button>

          <button
            id="modalConfirmBtn"
            style="
              padding: 6px 10px;
              font-size: 12px;
              border-radius: 6px;
              border: none;
              background: #e74c3c;
              color: #fff;
              cursor: pointer;
            "
          >
            ุญุฐู
          </button>

          <!-- ุฒุฑ ุญุณูุงู ููุฑุณุงุฆู ุงูุนุงุฏูุฉ -->
          <button
            id="modalOkBtn"
            style="
              margin: 0 auto;
              padding: 10px 25px;
              border-radius: 10px;
              border: none;
              background: #2e86c1;
              color: #fff;
              cursor: pointer;
              display: none;
            "
          >
            ุญุณูุงู
          </button>
        </div>
      </div>
    </div>

    <nav class="bottom-menu">
      <div class="menu-item cash-item">
        <span>๐ฐ ุฑุตูุฏ ุงูุฎุฒููุฉ:</span>
        <span id="cashBalance">0.00</span> ุฌููู
      </div>
    </nav>

    <script src="../js/data.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/sales.js"></script>
  </body>
</html>
